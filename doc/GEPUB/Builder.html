<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class GEPUB::Builder - RDoc Documentation</title>

<link href="../fonts.css" rel="stylesheet">
<link href="../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/navigation.js"></script>
<script src="../js/search_index.js"></script>
<script src="../js/search.js"></script>
<script src="../js/searcher.js"></script>
<script src="../js/darkfish.js"></script>


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link">Object
  
</div>

    <div id="includes-section" class="nav-section">
  <h3>Included Modules</h3>

  <ul class="link-list">
  
  
    <li><a class="include" href="BuilderMixin.html">GEPUB::BuilderMixin</a>
  
  
  </ul>
</div>

    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-new">::new</a>
    
    <li ><a href="#method-i-alts">#alts</a>
    
    <li ><a href="#method-i-collection">#collection</a>
    
    <li ><a href="#method-i-contributor">#contributor</a>
    
    <li ><a href="#method-i-contributors">#contributors</a>
    
    <li ><a href="#method-i-creator">#creator</a>
    
    <li ><a href="#method-i-creators">#creators</a>
    
    <li ><a href="#method-i-generate_epub">#generate_epub</a>
    
    <li ><a href="#method-i-generate_epub_stream">#generate_epub_stream</a>
    
    <li ><a href="#method-i-ibooks_version">#ibooks_version</a>
    
    <li ><a href="#method-i-optional_file">#optional_file</a>
    
    <li ><a href="#method-i-page_progression_direction">#page_progression_direction</a>
    
    <li ><a href="#method-i-publishers">#publishers</a>
    
    <li ><a href="#method-i-resources">#resources</a>
    
    <li ><a href="#method-i-unique_identifier">#unique_identifier</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-GEPUB::Builder">
  <h1 id="class-GEPUB::Builder" class="class">
    class GEPUB::Builder
  </h1>

  <section class="description">
    
<p><a href="Builder.html">Builder</a> is a wrapper class of <a
href="Book.html">Book</a>. It provides DSL to create new EPUB file.</p>

<h1 id="class-GEPUB::Builder-label-Synopsys">Synopsys<span><a href="#class-GEPUB::Builder-label-Synopsys">&para;</a> <a href="#documentation">&uarr;</a></span></h1>

<pre class="ruby"><span class="ruby-comment"># -*- coding: utf-8 -*-</span>
<span class="ruby-comment"># GEPUB::Builder example.</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;ruby gem&#39;</span>
<span class="ruby-identifier">require</span> <span class="ruby-string">&#39;gepub&#39;</span>

<span class="ruby-identifier">builder</span> = <span class="ruby-constant">GEPUB</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> {
  <span class="ruby-comment"># In the root block, you can define metadata.</span>
  <span class="ruby-comment"># You can define title, creator(s), contributor(s), publisher(s), date, unique_identifier, identifier, language.</span>
  <span class="ruby-comment"># Title can be specified with title, subtitle, collection, short_title, expanded_title, edition. </span>
  <span class="ruby-comment"># You can also define description, format, relation, right, source, subject, type.</span>
  <span class="ruby-comment"># You can &#39;refine&#39; last-defined metadata by refiner/attributes methods</span>
  <span class="ruby-comment"># Refiner methods contains : file_as, alt </span>

  <span class="ruby-identifier">language</span> <span class="ruby-string">&#39;ja&#39;</span>

  <span class="ruby-identifier">title</span> <span class="ruby-string">&#39;タイトル&#39;</span>
  <span class="ruby-identifier">alt</span> <span class="ruby-string">&#39;en&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;main title&#39;</span>
  <span class="ruby-identifier">file_as</span> <span class="ruby-string">&#39;main title&#39;</span>

  <span class="ruby-identifier">subtitle</span> <span class="ruby-string">&#39;サブタイトル&#39;</span>  
  <span class="ruby-identifier">alt</span> <span class="ruby-string">&#39;en&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;subtitle&#39;</span>

  <span class="ruby-comment"># collection title and position in the collection:</span>
  <span class="ruby-identifier">collection</span> <span class="ruby-string">&#39;gepub sample book series&#39;</span>, <span class="ruby-value">2</span>

  <span class="ruby-comment">#specifying creator</span>
  <span class="ruby-identifier">creator</span> <span class="ruby-string">&#39;author1&#39;</span>,<span class="ruby-string">&#39;aut&#39;</span>
  <span class="ruby-identifier">alt</span> <span class="ruby-string">&#39;ja&#39;</span> =<span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;日本語名&#39;</span> ,<span class="ruby-string">&#39;en&#39;</span> =<span class="ruby-operator">&gt;</span><span class="ruby-string">&#39;english name for author1&#39;</span>
  <span class="ruby-identifier">id</span> <span class="ruby-string">&#39;the_first_author&#39;</span>

  <span class="ruby-comment">#specifying multiple creator</span>
  <span class="ruby-identifier">creators</span> <span class="ruby-string">&#39;author1&#39;</span>, <span class="ruby-string">&#39;author2&#39;</span>, [<span class="ruby-string">&#39;editor1&#39;</span>, <span class="ruby-string">&#39;edt&#39;</span>]

  <span class="ruby-identifier">contributor</span> <span class="ruby-string">&#39;contributor&#39;</span>
  <span class="ruby-identifier">contributors</span> <span class="ruby-string">&#39;contributor1&#39;</span>, <span class="ruby-string">&#39;contributor2&#39;</span>
  <span class="ruby-comment"># easy way to write alt {&#39;ja&#39; =&gt;&#39;日本語 for contributor1&#39;}, {&#39;ja&#39; =&gt; &#39;日本語 for contributor2&#39;}</span>
  <span class="ruby-identifier">alts</span> <span class="ruby-string">&#39;ja&#39;</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-string">&#39;日本語 for contributor1&#39;</span>,<span class="ruby-string">&#39;日本語 for contributor2&#39;</span>] 

  <span class="ruby-identifier">publisher</span> <span class="ruby-string">&#39;出版社&#39;</span>
  <span class="ruby-identifier">alt</span> <span class="ruby-string">&#39;en&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;ThePublisher&#39;</span>

  <span class="ruby-identifier">date</span> <span class="ruby-string">&#39;2012-02-21T00:00:00Z&#39;</span>

  <span class="ruby-identifier">unique_identifier</span> <span class="ruby-string">&#39;the_unique_id_in_uuid&#39;</span>, <span class="ruby-string">&#39;uuid&#39;</span>
  <span class="ruby-identifier">identifier</span> <span class="ruby-string">&#39;http://other_id&#39;</span>,<span class="ruby-string">&#39;url&#39;</span>
  <span class="ruby-identifier">identifier</span> <span class="ruby-string">&#39;http://another_id&#39;</span>,<span class="ruby-string">&#39;url&#39;</span>

  <span class="ruby-comment"># in resources block, you can define resources by its relative path and datasource.</span>
  <span class="ruby-comment"># item creator methods are: files, file.</span>
  <span class="ruby-identifier">resources</span>(:<span class="ruby-identifier">workdir</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;~/epub_source&#39;</span>) {
    <span class="ruby-comment"># Reads from file. in EPUB container, they are placed at the same path.</span>
    <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;img/image0.jpg&#39;</span>
    <span class="ruby-identifier">files</span>(<span class="ruby-string">&#39;img/image.jpg&#39;</span>,<span class="ruby-string">&#39;img/image2.jpg&#39;</span>)
    <span class="ruby-identifier">glob</span> <span class="ruby-string">&#39;img/*.jpg&#39;</span> <span class="ruby-comment"># means files(Dir.glob(&#39;img/*.jpg&#39;))</span>

    <span class="ruby-comment"># Reads from file. will be placed at path indicated by key.</span>
    <span class="ruby-identifier">files</span>(<span class="ruby-string">&#39;img/image.jpg&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-string">&#39;imgage.jpg&#39;</span>)

    <span class="ruby-comment"># Read from IO object.</span>
    <span class="ruby-identifier">files</span>(<span class="ruby-string">&#39;img/image.png&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">supplied_io</span>, <span class="ruby-string">&#39;img/image2.png&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">supplied_io2</span>)

    <span class="ruby-comment"># this will be end in error:</span>
    <span class="ruby-comment"># files(io1, io2)</span>

    <span class="ruby-comment"># specify remote resource.</span>
    <span class="ruby-comment"># only referenced from the EPUB package.</span>
    <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;http://example.com/video/remote_video.qt&#39;</span>
    <span class="ruby-identifier">media_type</span>(<span class="ruby-string">&#39;video/quicktime&#39;</span>)

    <span class="ruby-comment"># specify media type. </span>
    <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;resources/pv.mp4&#39;</span>
    <span class="ruby-identifier">media_type</span>(<span class="ruby-string">&#39;video/mp4&#39;</span>)

    <span class="ruby-identifier">files</span>(<span class="ruby-string">&#39;audio/voice1.mp4&#39;</span>,<span class="ruby-string">&#39;audio/music1.mp4&#39;</span>)
    <span class="ruby-identifier">media_type</span>(<span class="ruby-string">&#39;audio/mp4&#39;</span>)  <span class="ruby-comment"># applied to all items in the line above.</span>

    <span class="ruby-comment"># media_type to some file</span>
    <span class="ruby-identifier">with_media_type</span>(<span class="ruby-string">&#39;video/mp4&#39;</span>) {
      <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;resources/v1.mp4&#39;</span>
      <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;resources/v2.mp4&#39;</span>
      <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;resources/v3.mp4&#39;</span>
    }

    <span class="ruby-comment"># with_media_type and media_type </span>
    <span class="ruby-identifier">with_media_type</span>(<span class="ruby-string">&#39;video/mp4&#39;</span>) {
      <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;resources/v1.mp4&#39;</span>
      <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;resources/v2.mp4&#39;</span>
      <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;resources/a4.mp4&#39;</span>
      <span class="ruby-identifier">media_type</span> <span class="ruby-string">&#39;audio/mp4&#39;</span> <span class="ruby-comment"># override with_media_type</span>
    }

    <span class="ruby-comment"># Read from IO object: loop</span>
    <span class="ruby-comment"># supplied_IOs = { &#39;path&#39; =&gt; io, &#39;path&#39; =&gt; io... }</span>
    <span class="ruby-identifier">supplied_IOs</span>.<span class="ruby-identifier">each</span> {
      <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">io</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">file</span> <span class="ruby-identifier">name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">io</span>
    }

    <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;css/default.css&#39;</span>

    <span class="ruby-comment"># indicate property.</span>
    <span class="ruby-comment"># this is cover image.</span>
    <span class="ruby-identifier">cover_image</span> <span class="ruby-string">&#39;img/cover.jpg&#39;</span>

    <span class="ruby-comment"># this is navigation document.</span>
    <span class="ruby-identifier">nav</span> <span class="ruby-string">&#39;text/toc.xhtml&#39;</span>

    <span class="ruby-comment"># ordered item. will be added to spine.</span>
    <span class="ruby-identifier">ordered</span> {
      <span class="ruby-comment"># specify texts on table of contents for auto-generated toc.</span>
      <span class="ruby-comment"># (if you supply navigation document with method &#39;nav&#39;,  &#39;heading&#39; has no effect.)</span>
      <span class="ruby-identifier">file</span>(<span class="ruby-string">&#39;text/chap1.xhtml&#39;</span>)
      <span class="ruby-identifier">heading</span> <span class="ruby-string">&#39;Chapter 1&#39;</span>
      <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;text/chap2.xhtml&#39;</span>

      <span class="ruby-comment"># fallback chain: style 1</span>
      <span class="ruby-identifier">fallback_group</span> {
        <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;chap3_docbook.xhtml&#39;</span>
        <span class="ruby-identifier">mimetype</span>(<span class="ruby-string">&#39;application/docbook+xml&#39;</span>)
        <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;chap3.xml&#39;</span>
        <span class="ruby-identifier">mimetype</span> <span class="ruby-string">&quot;application/z3986-auth+xml&quot;</span>
        <span class="ruby-identifier">file</span> <span class="ruby-string">&#39;chap3.xhtml&#39;</span>
      }

      <span class="ruby-comment"># fallback chain: style 2</span>
      <span class="ruby-identifier">fallback_chain_files</span> <span class="ruby-string">&#39;chap4_docbook.xhtml&#39;</span>, <span class="ruby-string">&#39;chap4.xml&#39;</span>, <span class="ruby-string">&#39;chap4.xhtml&#39;</span>
      <span class="ruby-identifier">mimetype</span>(<span class="ruby-string">&#39;application/docbook+xml&#39;</span>,<span class="ruby-string">&#39;application/z3986-auth+xml&#39;</span> <span class="ruby-string">&#39;application/xhtml+xml&#39;</span>)

      <span class="ruby-comment"># fallback chain: style 3 + with_mimetype</span>
      <span class="ruby-identifier">with_mimetype</span>(<span class="ruby-string">&#39;application/docbook+xml&#39;</span>,<span class="ruby-string">&#39;application/z3986-auth+xml&#39;</span> <span class="ruby-string">&#39;application/xhtml+xml&#39;</span>) {
        <span class="ruby-identifier">fallback_chain_files</span> <span class="ruby-string">&#39;chap5_docbook.xhtml&#39;</span>, <span class="ruby-string">&#39;chap5.xml&#39;</span>, <span class="ruby-string">&#39;chap5.xhtml&#39;</span> 
        <span class="ruby-identifier">fallback_chain_files</span> <span class="ruby-string">&#39;chap6_docbook.xhtml&#39;</span>, <span class="ruby-string">&#39;chap6.xml&#39;</span>, <span class="ruby-string">&#39;chap6.xhtml&#39;</span> 
        <span class="ruby-identifier">fallback_chain_files</span> <span class="ruby-string">&#39;chap7_docbook.xhtml&#39;</span>, <span class="ruby-string">&#39;chap7.xml&#39;</span>, <span class="ruby-string">&#39;chap7.xhtml&#39;</span> 
      }

    }
  }
}

<span class="ruby-identifier">builder</span>.<span class="ruby-identifier">generate_epub</span>(<span class="ruby-string">&#39;sample.epub&#39;</span>)
</pre>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-new" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(attributes = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 181</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">attributes</span> = {},  <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-ivar">@last_defined_item</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-ivar">@book</span> = <span class="ruby-constant">Book</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">instance_eval</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-comment"># TODO check @book&#39;s consistency</span>
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-alts" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">alts</span><span
            class="method-args">(alt_vals = {})</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="alts-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 250</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">alts</span>(<span class="ruby-identifier">alt_vals</span> = {})
  <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;can&#39;t specify alts on single item&quot;</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-ivar">@last_defined_item</span>
  <span class="ruby-ivar">@last_defined_item</span>.<span class="ruby-identifier">each_with_index</span> {
    <span class="ruby-operator">|</span><span class="ruby-identifier">item</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span> 
    <span class="ruby-identifier">item</span>.<span class="ruby-identifier">alt</span> <span class="ruby-constant">Hash</span>[<span class="ruby-operator">*</span>(<span class="ruby-identifier">alt_vals</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span>[<span class="ruby-identifier">index</span>]]}.<span class="ruby-identifier">flatten</span>)]
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-collection" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">collection</span><span
            class="method-args">(val, count = 1)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="collection-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 210</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">collection</span>(<span class="ruby-identifier">val</span>, <span class="ruby-identifier">count</span> = <span class="ruby-value">1</span>)
  <span class="ruby-ivar">@last_defined_item</span> =
    <span class="ruby-constant">MetaItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>.<span class="ruby-identifier">add_title</span>(<span class="ruby-identifier">val</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-constant">GEPUB</span><span class="ruby-operator">::</span><span class="ruby-constant">TITLE_TYPE</span><span class="ruby-operator">::</span><span class="ruby-constant">COLLECTION</span>).<span class="ruby-identifier">set_group_position</span>(<span class="ruby-identifier">count</span>.<span class="ruby-identifier">to_s</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-contributor" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">contributor</span><span
            class="method-args">(val, role = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="contributor-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 258</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">contributor</span>(<span class="ruby-identifier">val</span>, <span class="ruby-identifier">role</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-constant">MetaItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>.<span class="ruby-identifier">add_contributor</span>(<span class="ruby-identifier">val</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">role</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-contributors" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">contributors</span><span
            class="method-args">(*vals)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="contributors-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 229</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">contributors</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">vals</span>)
  <span class="ruby-ivar">@last_defined_item</span> = <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">map</span> {
    <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">v</span>
    <span class="ruby-identifier">role</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">name</span>,<span class="ruby-identifier">role</span> = <span class="ruby-identifier">v</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">v</span>[<span class="ruby-value">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">name</span>
    <span class="ruby-constant">MetaItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>.<span class="ruby-identifier">add_contributor</span>(<span class="ruby-identifier">name</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">role</span>))
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-creator" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creator</span><span
            class="method-args">(val, role = 'aut')</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="creator-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 215</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">creator</span>(<span class="ruby-identifier">val</span>, <span class="ruby-identifier">role</span> = <span class="ruby-string">&#39;aut&#39;</span>)
  <span class="ruby-constant">MetaItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>.<span class="ruby-identifier">add_creator</span>(<span class="ruby-identifier">val</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">role</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-creators" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">creators</span><span
            class="method-args">(*vals)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="creators-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 219</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">creators</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">vals</span>)
  <span class="ruby-ivar">@last_defined_item</span> = <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">map</span> {
    <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">name</span> = <span class="ruby-identifier">v</span>
    <span class="ruby-identifier">role</span> = <span class="ruby-string">&#39;aut&#39;</span>
    <span class="ruby-identifier">name</span>,<span class="ruby-identifier">role</span> = <span class="ruby-identifier">v</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">v</span>[<span class="ruby-value">1</span>] <span class="ruby-keyword">if</span> <span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">name</span>
    <span class="ruby-constant">MetaItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>.<span class="ruby-identifier">add_creator</span>(<span class="ruby-identifier">name</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-identifier">role</span>))
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-generate_epub" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_epub</span><span
            class="method-args">(path_to_epub)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="generate_epub-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 286</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_epub</span>(<span class="ruby-identifier">path_to_epub</span>)
  <span class="ruby-ivar">@book</span>.<span class="ruby-identifier">generate_epub</span>(<span class="ruby-identifier">path_to_epub</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-generate_epub_stream" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">generate_epub_stream</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="generate_epub_stream-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">generate_epub_stream</span>
  <span class="ruby-ivar">@book</span>.<span class="ruby-identifier">generate_epub_stream</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ibooks_version" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ibooks_version</span><span
            class="method-args">(val)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>specify version for ibooks</p>
          
          

          
          <div class="method-source-code" id="ibooks_version-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 268</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ibooks_version</span>(<span class="ruby-identifier">val</span>)
  <span class="ruby-ivar">@book</span>.<span class="ruby-identifier">ibooks_version</span>=<span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-optional_file" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">optional_file</span><span
            class="method-args">(val)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>set optional file. val should be <a href="../String.html">String</a> or <a
href="../Hash.html">Hash</a>. if val is <a
href="../String.html">String</a>, file is read from the File specified by
string and stored in EPUB to the path specified by string. if val is <a
href="../Hash.html">Hash</a>, file is read from the value and stored in
EPUB to the path specified by the key.</p>
          
          

          
          <div class="method-source-code" id="optional_file-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 275</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">optional_file</span>(<span class="ruby-identifier">val</span>)
  <span class="ruby-identifier">path</span> = <span class="ruby-identifier">val</span>
  <span class="ruby-identifier">io</span> = <span class="ruby-identifier">val</span> <span class="ruby-keyword">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">val</span>
  <span class="ruby-keyword">if</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">val</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&#39;argument to optional_file should be length 1&#39;</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-value">1</span>
    <span class="ruby-identifier">path</span> = <span class="ruby-identifier">val</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">0</span>]
    <span class="ruby-identifier">io</span> = <span class="ruby-identifier">val</span>.<span class="ruby-identifier">first</span>[<span class="ruby-value">1</span>]
  <span class="ruby-keyword">end</span>
  <span class="ruby-ivar">@book</span>.<span class="ruby-identifier">add_optional_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">io</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-page_progression_direction" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">page_progression_direction</span><span
            class="method-args">(val)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>set page progression direction.</p>
          
          

          
          <div class="method-source-code" id="page_progression_direction-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 263</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">page_progression_direction</span>(<span class="ruby-identifier">val</span>)
  <span class="ruby-identifier">raise</span> <span class="ruby-identifier">assert</span> <span class="ruby-keyword">unless</span> [<span class="ruby-string">&#39;rtl&#39;</span>, <span class="ruby-string">&#39;ltr&#39;</span>, <span class="ruby-string">&#39;default&#39;</span>].<span class="ruby-identifier">member?</span> <span class="ruby-identifier">val</span>
  <span class="ruby-ivar">@book</span>.<span class="ruby-identifier">page_progression_direction</span> = <span class="ruby-identifier">val</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-publishers" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">publishers</span><span
            class="method-args">(*vals)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="publishers-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 239</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">publishers</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">vals</span>)
  <span class="ruby-ivar">@last_defined_item</span> = <span class="ruby-identifier">vals</span>.<span class="ruby-identifier">map</span> {
    <span class="ruby-operator">|</span><span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
    <span class="ruby-constant">MetaItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>.<span class="ruby-identifier">add_publisher</span>(<span class="ruby-identifier">v</span>, <span class="ruby-keyword">nil</span>))
  }
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-resources" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">resources</span><span
            class="method-args">(attributes = {}, &block)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="resources-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 290</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">resources</span>(<span class="ruby-identifier">attributes</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
  <span class="ruby-constant">ResourceBuilder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>, <span class="ruby-identifier">attributes</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unique_identifier" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unique_identifier</span><span
            class="method-args">(val, id = 'BookID', scheme = 'nil')</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="unique_identifier-source">
            <pre><span class="ruby-comment"># File lib/gepub/builder.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unique_identifier</span>(<span class="ruby-identifier">val</span>, <span class="ruby-identifier">id</span> = <span class="ruby-string">&#39;BookID&#39;</span>, <span class="ruby-identifier">scheme</span> = <span class="ruby-string">&#39;nil&#39;</span>)
  <span class="ruby-ivar">@last_defined_item</span> = <span class="ruby-constant">MetaItem</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@book</span>.<span class="ruby-identifier">set_primary_identifier</span>(<span class="ruby-identifier">val</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">scheme</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

